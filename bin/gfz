#!/usr/bin/env bash

COMMAND="$1"
COMMAND_PARAM="$2"
GFZ_FOLDER="$(dirname "$0")/../lib"
. "${GFZ_FOLDER}/helpers.sh"
. "${GFZ_FOLDER}/modules/add.sh"
. "${GFZ_FOLDER}/modules/checkout.sh"
. "${GFZ_FOLDER}/modules/pull.sh"
. "${GFZ_FOLDER}/modules/push.sh"
. "${GFZ_FOLDER}/modules/remove.sh"
. "${GFZ_FOLDER}/modules/rgi.sh"
. "${GFZ_FOLDER}/modules/status.sh"
. "${GFZ_FOLDER}/modules/switch.sh"

gfz_check_environment

export GFZ_EDITOR="code"
if [[ -z "$GFZ_EDITOR" ]]; then
    GFZ_EDITOR=$(basename "$EDITOR")
fi

case $COMMAND in
    "ad")
        gfz_add
        ;;
    "co")
        gfz_checkout
        ;;
    "h_apply")
        gfz_apply "${@:2}"
        ;;
    "h_commit")
        gfz_commit
        ;;
    "h_get_diff_region")
        gfz_get_diff_region "${COMMAND_PARAM}"
        ;;
    "h_get_file_status")
        gfz_get_file_status "${COMMAND_PARAM}"
        ;;
    "h_get_repo_status")
        gfz_get_repo_status
        ;;
    "h_open_in_editor")
        gfz_open_in_editor "${@:2}"
        ;;
    "h_create_or_switch_branch")
        gfz_create_or_switch_branch "${COMMAND_PARAM}"
        ;;
    "h_toggle_staged")
        gfz_toggle_staged "${COMMAND_PARAM}"
        ;;
    "d")
        git diff
        ;;
    "pl")
        gfz_pull
        ;;
    "ps")
        gfz_push
        ;;
    "rg")
        gfz_rg "${COMMAND_PARAM}"
        ;;
    "rm")
        gfz_remove
        ;;
    "st")
        gfz_status
        ;;
    "sw")
        gfz_switch "${COMMAND_PARAM}"
        ;;
    *)
        git "${@:1}"
esac